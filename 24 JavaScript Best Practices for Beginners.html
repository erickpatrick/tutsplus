<h1>24 Boas Práticas no JavaScript para Iniciantes</h1>

<p>Como continuação ao artigo <a href="http://net.tutsplus.com/tutorials/html-css-techniques/30-html-best-practices-for-beginners/">"30 Boas Práticas no HTML e CSS"</a>, essa semana, revisarei as boas práticas do JavaScript! Após revisar essa lista, deixe suas próprias dicas nos comentários!</p>

<h2><span>1.</span> Use === Ao Invés de == </h2>

<p>O JavaScript usa dois tipos diferentes de operadores de igualdade: <em>===</em> | <em>!==</em> e <em>==</em> | <em>!=</em>. Considera-se boa prática, sempre usar a primeira dupla, ao fazer comparações.</p>

<blockquote><p>Se dois operandos tem o mesmo tipo e valor, o === retornar verdadeiro e !== retorna falso." - JavaScript: Melhores Partes </p></blockquote>

<p>Entretanto, ao usarmos <em>==</em> e <em>!=</em>, você acabará se deparando com problemas, ao trabalhar com tipos diferentes. Nesses casos, eles forçaram uma conversão dos valores, sem sucesso.</p>

<h2><span>2.</span> Eval = Ruim</h2>

<p>Para aqueles não familiarizados, a função <code>eval</code> dá-nos acesso ao compilador do JavaScript. Essencialmente, podemos executar o resultado de uma cadeia de caracteres passando como parâmetro para a função <code>eval</code>.</p>

<p>Além de diminuir substancialmente a performance do seu script, isso também gera um grande risco à segurança da aplicação, uma vez que dá muito poder ao que foi passado como texto. Evite! </p>

<h2><span>3.</span> Não Use Abreviações</h2>

<p>Tecnicamente, você não precisa usar chaves ou ponto-e-vígulas. A maioria dos navegadores intepretará corretamente o trecho abaixo:</p>

<pre class="brush: javascript">
if(someVariableExists)
 x = false</pre>

<p>Entretanto, considere o seguinte: </p>

<pre class="brush: javascript">
if(someVariableExists)
 x = false
 anotherFunctionCall();</pre>

<p>Alguém pode achar que o código acima equivale ao do trecho abaixo:</p>

<pre class="brush: javascript">
if(someVariableExists) {
 x = false;
 anotherFunctionCall();
}</pre>

<p>Infelizmente, ele estaria errado. Na verdade, ele significaria:</p>

<pre class="brush: javascript">
if(someVariableExists) {
 x = false;
}
anotherFunctionCall();</pre>

<p>Como você perceberá, a indentação imita o funcionamento das chaves. Não é preciso dizer que, essa prática, é terrível, e deve ser evitada a todo custo. A única vez que as chaves podem ser omitidos é nas instruções de linha única e, ainda assim, isso também é bastante debatido.</p>

<pre class="brush: javascript">
if(2 + 2 === 4) return 'nicely done';</pre>

<h4>Sempre Considere o Futuro</h4>

<p>E se, algum tempo depois, você precisar adicionar comandos à instrução <code>if</code>? Para tanto, precisará reescrever esse bloco de código. No fim das contas, tome muito cuidado ao omitir as chaves. </p>

<h2><span>4.</span> Use o JS Lint </h2>

<p>O <a href="http://www.jslint.com/">JSLint</a> é um depurador, escrito pelo Douglas Crockford. Cole seu script lá e ele, rapidamente, escaneará por problemas e erros notáveis em seu código.</p>

<blockquote>
<p>O JSLint pega um código fonte em JavaScript e escaneia-o. Se encontrar algum problema, retorna uma mensagem descrevendo o problema e a localização aproximada no código fonte. O problema não será, necessariamente, um erro de sintaxe, embora, geralmente, seja. O JSLint procura por algumas conveções de estilo de programação, bem como por problemas estruturais. Ele não atesta que seu programa está correto. Só provê "outros olhos" para ajudar a encontrar problemas." <br /> - Documentação do JSLint</p></blockquote>

<p>Antes de publicar algum script, execute-o pelo JSLint para ter certeza que não cometeu qualquer erro bobo.</p>

<h2><span>5.</span> Coloque os Scripts na Parte Final da Sua Página</h2>

<p>Essa dica já foi abordada no meu artigo anterior dessa série. Mas, como ele é pertinente, colocarei a informação.</p>

<figure>
<img src="http://cdn.tutsplus.com/net/uploads/legacy/327_30Musts/javascriptButton.png" data-original-url="http://nettuts.s3.amazonaws.com/327_30Musts/javascriptButton.png" alt="Place JS at bottom" style="width: 600px;" />
</figure>

<p>Lembre-se &ndash; o objetivo principal é fazer a página carregar o mais rápido possível para o usuário. Quando carregar um script, o navegador não pode ocntinuar até que o arquivo inteiro tenha sido carregado. Assim, o usuário terá de esperar mais para perceber algum progresso.</p>

<p>Se o propósito dos seus arquivos JavaScript são, somente, para adicionar funcionalidades &ndash; por exemplo, após um botão ser clicado &ndash; vá em frente e coloque todos esses arquivos ao final da página, logo antes do fechamento da tag <code>body</code>. Isso é, definitivamente, uma boa prática.</p>

<h4>Bem Melhor</h4>

<pre class="brush: html">
&lt;p&gt;E, agora, você sabe os meus tipos favoritos de milho. &lt;/p&gt;
&lt;script type="text/javascript" src="path/to/file.js"&gt;&lt;/script&gt;
&lt;script type="text/javascript" src="path/to/anotherFile.js"&gt;&lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;</pre>


<h2><span>6.</span> Declare Variáveis, Fora da Instrução For</h2>

<p>Ao executar instruções <code>for</code> muito grandes, não faça com que o motor JavaScript tenha de trabalhar mais que ele realmente precisa. Por exemplo:</p>

<h4>Ruim</h4>

<pre class="brush: javascript">
for(var i = 0; i &lt; someArray.length; i++) {
 var container = document.getElementById('container');
 container.innerHtml += 'my number: ' + i;
 console.log(i);
}</pre>

<p>Perceba como precisamos determinar o tamanho do vetor a cada iteração e como temos de atravessar a DOM para encontrar o elemento <code>container</code> todas as vezes &ndash; altamente ineficiente!</p>

<h4>Bem Melhor</h4>

<pre class="brush: javascript">
var container = document.getElementById('container');
for(var i = 0, len = someArray.length; i &lt; len;  i++) {
 container.innerHtml += 'my number: ' + i;
 console.log(i);
}</pre>

<p>Pontos extras para aquele que deixar um comentário mostrando e explicando como podemos melhorar o trecho acima, ainda mais.</p>

<h2><span>7.</span> A Forma Mais Rápida de Construir uma Cadeia de Caracteres</h2>

<p>Não opte, sempre, pelo útil <code>for</code>, quando precisar iterar por um vetor ou objeto. Seja criativo e encontre a solução mais rápida para o trabalho em questão.</p>

<pre class="brush: javascript">
var arr = ['item 1', 'item 2', 'item 3', ...];
var list = '&lt;ul&gt;&lt;li&gt;' + arr.join('&lt;/li&gt;&lt;li&gt;') + '&lt;/li&gt;&lt;/ul&gt;';</pre>

<blockquote>
<p>Não chatearei você com <em>benchmarks</em>; você terá de acreditar em mim (ou testar por conta própria) - esse, de longe, é o método mais rápido!</p>

<p>Usar métodos nativos (como o <code>join()</code>), independente do que esteja acontecendo por trás da camada de abstração, é, geralmente, muito mais rápido que os métodos alternativos, não nativos.  <br /> - James Padolsey, james.padolsey.com</p></blockquote>


<h2><span>8.</span> Reduza as Variáveis Globais </h2>

<blockquote><p>Ao reduzir a quantidade de variáveis globais a um único nome, você reduz, significantemente, a chance de más interações com outras aplicações, widgets ou bibliotecas". <br /> - Douglas Crockford</p></blockquote>

<pre class="brush: javascript">
var name = 'Jeffrey';
var lastName = 'Way';

function doSomething() {...}

console.log(name); // Jeffrey -- or window.name</pre>

<h4>Bem Melhor</h4>

<pre class="brush: javascript">
var DudeNameSpace = {
 name : 'Jeffrey',
 lastName : 'Way',
 doSomething : function() {...}
}
console.log(DudeNameSpace.name); // Jeffrey</pre>

<p>Note como reduzimos a quantidade de globais para o objeto, ridiculamente, chamado "DudeNameSpace".</p>

<h2><span>9.</span> Comente Seu Código </h2>

<p>Pode até parecer desnecessário, no começo, mas, acredite, você QUERERÁ comentar seus códigos da melhor forma possível. O que acontece quando você volta a trabalhar em um projeto, depois de um mês sem tocar nele, só para descobrir que você não é capaz de lembrar, facilmente, a linha de pensamento que tinha. E se um de seus colegas tiver de revisar seu código? Sempre, sempre comente seções importantes do seu código.</p>

<pre class="brush: javascript">
// Iterar sobre o vetor e imprime cada nome.
for(var i = 0, len = array.length; i &lt; len; i++) {
 console.log(array[i]);
}</pre>


<h2><span>10.</span> Adira ao Aprimoramento Progressivo</h2>

<p>Sempre crie uma alternativa para quando o JavaScript estiver desabilitado. Pode ser tentador pensar "A maioria dos visitantes tem o JavaScript habilitado, então, não preciso ficar preocupado". Porém, isso seria um erro gigantesco.</p>

<p>Você já parou para ver seu <em>slider</em> sem o JavaScript habilitado? (<a href="https://addons.mozilla.org/en-US/firefox/addon/60">Baixe</a> a Barra de Ferramentas do Desenvolvedor Web para conseguir fazer isso de forma fácil). Ele pode quebrar seu site completamente. Por via de regra, projete seu site, assumindo que o JavaScript estará desabilitado. Então, assim que o tiver feito, comece a <strong>aprimora progressivamente</strong> o layout!</p>

<h2><span>11.</span> Não Passe uma Cadeia de Caracteres Para "SetInterval" ou "SetTimeOut" </h2>

<p>Considere o código a seguir:</p>

<pre class="brush: javascript">
setInterval(
"document.getElementById('container').innerHTML += 'My new number: ' + i", 3000
);</pre>

<p>Além de ser um código ineficiente, também funciona como se fosse a função <code>eval</code>. <strong>Nunca passe uma cadeia de caracteres para SetInterval ou SetTimeOut</strong>. Ao invés disso, passe uma função nomeada.</p>

<pre class="brush: javascript">
setInterval(someFunction, 3000);</pre>

<h2><span>12.</span> Não Use a Instrução "With" </h2>

<p>A primeira vista, instruções "With" parecem ser uma boa ideia. O conceito básico delas é que podemo ser usadas para prover uma forma rápida para acessar objetos aninhados profundamente. Por exemplo...</p>

<pre class="brush: javascript">
with (being.person.man.bodyparts) {
 arms = true;
 legs = true;
}</pre>

<p>&ndash; ao invés de &ndash; </p>

<pre class="brush: javascript">
being.person.man.bodyparts.arms = true;
being.person.man.bodyparts.legs= true;</pre>

<p>Infelizmente, após alguns testes, percebeu-se que isso "se compoarta muito mal ao adicionar novos membros". Você deve usar um <code>var</code>.</p>

<pre class="brush: javascript">
var o = being.person.man.bodyparts;
o.arms = true;
o.legs = true;</pre>

<h2><span>13.</span> Use {} Ao Invés de New Object() </h2>

<p>Há inúmeras formas de criar objetos em JavaScript. Talvez o método mais tradicional é usar o construtor "new", dessa forma: </p>

<pre class="brush: javascript">
var o = new Object();
o.name = 'Jeffrey';
o.lastName = 'Way';
o.someFunction = function() {
 console.log(this.name);
}</pre>

<p>Entretanto, esse método recebe o selo de "má prática" sem, necessariamente, ser. Contudo, recomendo que você use uma forma muito mais robusta de criação de objetos, o método do objeto literal.</p>

<h4>Bem Melhor</h4>

<pre class="brush: javascript">
var o = {
 name: 'Jeffrey',
 lastName = 'Way',
 someFunction : function() {
    console.log(this.name);
 }
};</pre>

<p>Note que, se quiser criar um simples objeto em branco, basta atribuir <code>{}</code> a uma variável.</p>

<pre class="brush: javascript">
var o = {};</pre>

<blockquote>
<p>Objetos literais permitem-nos escrever código que suporta várias funcionalidades e, ainda assim, torná-lo relativamente direto para os implementadores do nosso código. Não há necessidade de invocar construtores diretamente ou manter a ordem correta dos argumentos passados para as funções, etc". - <a href="http://www.dyn-web.com/tutorials/obj_lit.php">dyn-web.com</a></p></blockquote>

<h2><span>14.</span> Use [] Ao Invés de New Array() </h2>

<p>O mesmo do ponto anterior, se aplica a vetores.</p>

<h4>Okay</h4>

<pre class="brush: javascript">
var a = new Array();
a[0] = "Joe";
a[1] = 'Plumber';</pre>

<h4>Bem Melhor</h4>

<pre class="brush: javascript">
var a = ['Joe','Plumber'];</pre>

<blockquote><p>Um erro comum em programas JavaScript é usar um objeto no momento que um vetor é requerido, ou o contrário. A regra é simples: quando os nomes das propriedades são pequenos números inteiros sequenciais, você deve usar um vetor. Caso contrário, use um objeto". - Douglas Crockford</p></blockquote>

<h2><span>15.</span> Tem Uma Longa Lista de Variáveis? Omita a Palavra-Chave "var" e Passe a Usar Vírgulas</h2>

<pre class="brush: javascript">
var someItem = 'some string';
var anotherItem = 'another string';
var oneMoreItem = 'one more string';</pre>

<h4>Bem Melhor</h4>

<pre class="brush: javascript">
var someItem = 'some string',
  anotherItem = 'another string',
  oneMoreItem = 'one more string';</pre>

<p>...Isso deveria ser auto-explicativo. Duvido que tenha qualquer aprimoramento em velocidade, mas ele deixa seu código mais limpo. </p>

<h2><span>17.</span> Sempre, Sempre Use Ponto-e-Vírgulas</h2>

<p>Tecnicamente, a maioria dos navegadores permitem você não usar os ponto-e-vírgulas.</p>

<pre class="brush: javascript">
var someItem = 'some string'
function doSomething() {
return 'something'
}</pre>

<p>Com isso dito, isso é uma prática muito ruim que pode levar a problemas, potencialmente, muito mais difíceis de achar.</p>

<h4>Bem Melhor</h4>

<pre class="brush: javascript">
var someItem = 'some string';
function doSomething() {
return 'something';
}</pre>

<h2><span>18.</span> Instruções "For in" </h2>

<p>Ao iterar sobre itens de um objeto, você talvez perceba que está trazendo os métodos do objeto também. Para contornar isso, sempre envolva seu código usando uma instrução <code>if</code> que filtre a informação:</p>

<pre class="brush: javascript">
for(key in object) {
 if(object.hasOwnProperty(key) {
    ...then do something...
 }
}</pre>

<p><em>Como referenciado em JavaScript: Melhores Partes, por Douglas Crockford. </em></p>

<h2><span>19.</span> Use a Funcionalidade "Timer" do Firebug Para Otimizar Seu Código </h2>

<p>Precisa de uma forma rápida e fácil de determinar o quanto uma operação leva? Use a funcionalidade "Timer" do Firebug para registrar os resultados.</p>

<pre class="brush: javascript">
function TimeTracker(){
 console.time("MyTimer");
 for(x=5000; x &gt; 0; x--){}
 console.timeEnd("MyTimer");
}</pre>

<h2><span>20.</span> Leia, Leia, Leia... </h2>

<p>Embora seja um grande fã de blogs sobre desenvolvimento web (gosto muito deste aqui!), não há um verdadeiro substituto para um bom livro enquanto almoço ou antes de ir dormir. Sempre tenha um livro sobre desenvolvimento web na sua mesa de cama. Eis os meus livros facoritos sobre JavaScript.</p>

<ul>
<li><a href="http://www.packtpub.com/object-oriented-javascript-applications-libraries/book">JavaScript Orientado a Objetos</a></li>
<li><a href="http://oreilly.com/catalog/9780596517748/">JavaScript: Melhores Partes</a></li>
<li><a href="www.packtpub.com/learning-jquery-1.3/boo">Aprendendo jQuery 1.3</a></li>
<li><a href="http://oreilly.com/catalog/9780596527464/">Aprendendo JavaScript</a></li>
</ul>

<p>Leia todos... Várias vezes. Eu mesmo ainda faço isso!</p>

<h2><span>21.</span> Funções Auto-executáveis </h2>

<p>Ao invés de invocar uma função, é bem fácil criar uma função que automaticamente é executada quando a página carregar ou quando uma função pai for executada. Simplesmente, envolva sua função em parênteses e adicione um par extra ao final, que, essencialmente, invocará a função. Algo assim:</p>

<pre class="brush: javascript">
(function doSomething() {
 return {
    name: 'jeff',
    lastName: 'way'
 };
})();</pre>

<h2><span>22.</span> JavaScript Puro Sempre Pode Ser Mais Rápido Que Usar Uma Biblioteca</h2>

<p>Bibliotecas JavaScript, como jQuery e Mootools, podem salvar um bom tempo quando estiver programando &ndash; especialmente com operações AJAX. Sabendo disso, tenha sempre em mente que uma biblioteca nunca será tão rápida quanto o JavaScript puro (assumindo que seu código esteja correto).</p>

<p>O método <code>each</code> do jQuery é ótimo para iterações, mas usar a isntrução <code>for</code> nativa, sempre será mais um pouco mais rápido.</p>

<h2><span>23.</span> Crockford's JSON.Parse </h2>

<p>Although JavaScript 2 should have a built-in JSON parser, as of this writing, we still need to implement our own. Douglas Crockford, the creator of JSON, has already created a parser that you can use. It can be downloaded <a href="http://www.json.org/json2.js">HERE</a>.</p>

<p>Simply by importing the script, you'll gain access to a new JSON global object, which can then be used to parse your .json file.</p>

<pre class="brush: javascript">
 var response = JSON.parse(xhr.responseText);

 var container = document.getElementById('container');
 for(var i = 0, len = response.length; i &lt; len; i++) {
 container.innerHTML += '&lt;li&gt;' + response[i].name + ' : ' + response[i].email + '&lt;/li&gt;';
 }</pre>

<h2><span>24.</span> Remove "Language" </h2>

<p>Years ago, it wasn't uncommon to find the "language" attribute within script tags.</p>

<pre class="brush: javascript">
&lt;script type="text/javascript" language="javascript"&gt;
...
&lt;/script&gt;</pre>

<p>However, this attribute has long since been deprecated; so leave it out.</p>

<h2>That's All, Folks</h2>

<p>So there you have it; twenty-four essential tips for beginning JavaScripters. Let me know your quick tips! Thanks for reading. What subject should the third part in this series cover?</p>
