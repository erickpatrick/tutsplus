<h1>Compartilhando Componentes do Polymer: Parte 2</h1>

<p>Na <a href="http://code.tutsplus.com/tutorials/sharing-polymer-components-part-1--cms-21264" target="_self">parte um</a> dessa série, mostrei como configurar o ótimo modelo <a href="https://github.com/PolymerLabs/untitled-element"><code class="inline">untitled-element</code></a>, que a equipe do Polymer criou para tornar a criação e compartilhamento de componentes, substancialmente, mais fácil. </p>

<p>No tutorial a seguir, aprofundarei nos itens que o <code class="inline">untitled-element</code> inclui, como a funcionalidade de auto-geração de documentação, e como preparar seu componente para distribuição via Bower. Continuarei usando o componente Reddit que criei no primeiro tutorial.</p>

<h2>Uma Melhor Olhada No <code class="inline">untitled-element</code></h2>

<p>Dentro do seu projeto modelo, há alguns arquivos chave que você usará:</p>

<ul>
<li><code class="inline">bower.json</code> - Permite especificar configurações e dependências do seu componente</li>
<li><code class="inline">untitled-element-master.html</code> - Layout do seu novo componente</li>
<li><code class="inline">untitled-element-master.css</code> - Folha de estilo que estilizará o modelo do seu novo componente</li>
<li><code class="inline">index.html</code> - Arquivo HTML que inclui a base do Polymer para a geração de documentação</li>
<li><code class="inline">demo.html</code> - Arquivo HTML que permitirá seus usuários testar seu componente</li>
</ul>

<p>Esses são os arquivos base que estão presentes quando você baixa o modelo a partir <a href="https://github.com/PolymerLabs/untitled-element">do repositório PolymerLabs no GitHub</a>, e servirão como a fundação do seu novo componente. Na parte um, nós renomeamos o arquivo <code class="inline">untitled-element-master.html</code> para <code class="inline">reddit-element.html</code>, e o arquivo <code class="inline">untitled-element-master.css</code> para <code class="inline">reddit-element.css</code>, uma vez que eles precisam ser nomeados tal qual nosso componente. Nós também atualizamos as referências a <code class="inline">untitled-element</code> nos arquivos, para garantir que referenciam o nome correto do componente.</p>

<p>Olhemos o código do arquivo <code class="inline">reddit-element.html</code>: </p>

<pre class="brush: html">&lt;link rel="import" href="../polymer/polymer.html"&gt;

&lt;!--
Element providing solution to no problem in particular.

##### Example

    &lt;reddit-element&gt;&lt;/reddit-element&gt;

@element reddit-element
@blurb Element providing solution to no problem in particular.
@status alpha
@url github.io
--&gt;
&lt;polymer-element name="reddit-element" attributes="notitle"&gt;

  &lt;template&gt;

    &lt;link href="reddit-element.css" rel="stylesheet" /&gt;

    &lt;content&gt;&lt;/content&gt;

  &lt;/template&gt;

  &lt;script&gt;

    Polymer({
      /**
       * The 'noevent' event is not actually fired from here,
       * we document it as an example of documenting events.
       *
       * @event noevent
       */

      /**
       * The 'notitle' attribute does not yet have a purpose.
       *
       * @attribute notitle
       * @type string
       */
      notitle: '',

      ready: function() {
      },

      /**
       * The 'task' method does no work at this time.
       *
       * @method task
       * @return {Object} Returns undefined.
       * @param {String} dummy Serves no purpose today.
       */
      task: function(dummy) {
      }

    });

  &lt;/script&gt;

&lt;/polymer-element&gt;
</pre>

<p>Fora o básico, da ligação com a base do Polymer, definição dos atributos e adição de um espaço reservad para a inclusção de JavaScript em seu componente, o <i>ponto chave</i> a notar é que as referências de recursos externos usam o caminho canônico mencionado antes. É por isso que a parte de preparação do Bower, na parte um desse tutorial, é tão importante. Ela garante que todas as dependências imitem o seu ambiente de desenvolvimento, tal qual seria se você já estivesse compartilhando seu componente.</p>

<p>Também note o monte de meta-documentação inclusa no componente. Há um motivo importante para isso. O modelo lança mão do elemento <em><a href="https://github.com/Polymer/core-component-page">core-component-page</a></em> para extrair a documentação do seu elemento para poder criar uma página de documentção no estilo do JSDoc! Se abrir o arquivo <code class="inline">index.html</code>, poderá ver a referência lá:</p>

<pre class="brush: html">&lt;core-component-page&gt;&lt;/core-component-page&gt;</pre>

<p>De cara, sem adicionar qualquer código, só executando o <code class="inline">index.html</code>, obtenho uma página de documentação da minha API, como essa:</p><figure class="post_image"><img alt="" src="https://s3.amazonaws.com/cms-assets.tutsplus.com/uploads/users/45/posts/21497/image/element-doc.png"></figure>

<p>Então, garantindo que você <a href="http://usejsdoc.org/about-getting-started.html">comenta adequadamente</a> seu componente, o modelo oferece as facilidades necessárias para criar essa documentação de API incrivelmente útil.</p>

<p>Also, if you look in the upper left-hand corner of the documentation page, you'll notice that right next to the element name is a <b>demo</b> button:</p><figure class="post_image"><img alt="" src="https://s3.amazonaws.com/cms-assets.tutsplus.com/uploads/users/45/posts/21497/image/element-doc-demo.png"></figure>

<p>Clicking it will make a call to <code class="inline">demo.html</code>. This is another important feature because it means that when you publish your component, others can not only have great documentation to reference but they'll also be able to test your component immediately, to see if it meets their needs. We'll touch on that in a bit.</p>

<p>Here's what the Reddit component looks like, once I shifted the code over to the boilerplate:</p>

<pre class="brush: html">&lt;link rel="import" href="../polymer/polymer.html"&gt;
&lt;link rel="import" href="../core-ajax/core-ajax.html"&gt;

&lt;!--
Element that returns the public descript of a subreddit

##### Example

    &lt;reddit-element subreddit="cute"&gt;&lt;/reddit-element&gt;

@element reddit-element
@blurb Element that returns the public descript of a subreddit
@status alpha
@url github.io
--&gt;
&lt;polymer-element name="reddit-element" attributes="subreddit"&gt;

  &lt;template&gt;

    &lt;link href="reddit-element.css" rel="stylesheet" /&gt;

    &lt;core-ajax url="http://www.reddit.com//r/{{subreddit}}/about.json" auto response="{{resp}}"&gt;&lt;/core-ajax&gt;

    &lt;div class="myreddit"&gt;{{resp.data.public_description}}&lt;/div&gt;

  &lt;/template&gt;

  &lt;script&gt;

    Polymer({
      /**
       * The 'subreddit' attribute takes in the name of a subreddit.
       * It defaults to the 'aww' subreddit if no value is passed
       *
       * @attribute subreddit
       * @type string
       */
      subreddit: "aww"

    });

  &lt;/script&gt;

&lt;/polymer-element&gt;
</pre>

<p>The main differences are that it now takes advantage of JSDoc-like commenting and also using the canonical paths to access the sibling components it needs. I also added some minor styling in <code class="inline">reddit-element.css</code> to prettify things a little:</p>

<pre class="brush: css">.myreddit {
    width: 300px;
    height: 300px;
    font-size: 16px;
    font-family: Tahoma;
}
</pre>

<p>And of course, I get the benefit of a nice documentation page for my component:</p><figure class="post_image"><img alt="" src="https://s3.amazonaws.com/cms-assets.tutsplus.com/uploads/users/45/posts/21497/image/element-doc-final.png"></figure>

<h2>Putting It on GitHub</h2>

<p>In order for you to distribute your component via Bower, it needs to be available at a Git endpoint and have a Git tag with a corresponding version number so that users know which version they'll be installing. For the purposes of this tutorial, I'll use GitHub.</p>

<p>The initial steps are relatively easy and common for those familiar with Git, as it's simply creating a new local repository, adding and committing your current project files and then pushing it up to GitHub. The steps are really simple. I'll assume you're using Terminal when doing this, that you have Git installed and that you have a GitHub account:</p>

<ol>
<li>Make sure you're in your component's directory (e.g.: <code class="inline">reddit-element</code>)</li>
<li>Type <code class="inline">git init</code> to initialize a new local repository in that directory</li>
<li>Type <code class="inline">git add .</code> to add all of your files</li>
<li>Type <code class="inline">git commit -am ‘My first commit'</code> to commit your files to the repository</li>
<li>Create a new repo in GitHub, with your component's name (e.g.: <code class="inline">reddit-element</code>)</li>
<li>Type <code class="inline">git remote add origin </code><a href="https://github.com//reddit-element.git"><code class="inline">https://github.com//reddit-element.git</code></a> to set up a remote to your new GitHub repo.</li>
<li>Type <code class="inline">git push -u origin master</code> to push the files to GitHub.</li>
</ol>

<p>If you refresh the page for your GitHub repo, you should now see all of the files for your component.</p>

<p>Now once you're done making changes to your component and you feel it's ready to go, you'll need to tag a release. This is done by creating a Git tag that marks a specific point of history in your repository. You can do this via the command line, but the easiest way is to do it directly through GitHub by clicking on the "<b>releases</b>" link:</p><figure class="post_image"><img alt="" src="https://s3.amazonaws.com/cms-assets.tutsplus.com/uploads/users/45/posts/21497/image/release.png"></figure>

<p>This walks you through the process of creating a release for your component:</p><figure class="post_image"><img alt="" src="https://s3.amazonaws.com/cms-assets.tutsplus.com/uploads/users/45/posts/21497/image/release-2.png"></figure>

<p>Clicking on the "<b>Create a new release</b>" button will take you to a form that allows you to define information about this specific release, including the version number, the target branch and general information about this release. Bower follows the semantic versioning model and you should remain consistent with that. For example, in <code class="inline">bower.json</code>, I listed the component's version number as "<code class="inline">0.0.1</code>", so I'll follow that same technique for my release.</p><figure class="post_image"><img alt="" src="https://s3.amazonaws.com/cms-assets.tutsplus.com/uploads/users/45/posts/21497/image/release-3.png"></figure>

<p>From there, it's a simple matter of hitting the <b>publishing</b> button and, boom, I have a new release:</p><figure class="post_image"><img alt="" src="https://s3.amazonaws.com/cms-assets.tutsplus.com/uploads/users/45/posts/21497/image/release-final.png"></figure>

<p>Again, this is an important step since it'll help users find a version history of your component.</p>

<p>The last thing we need to do on GitHub is publish a landing page for the component. The landing page will consist of the documentation page that is generated automatically by the boilerplate, making the documentation and demo readily available for you to easily share. To do this, the Polymer team has created a simple script that handles the creation of a GitHub page's branch ,for the repo. You'll need to pull down the script from the Polymer Github repo and run it <em>within the parent directory</em>. I'm emphasizing this so that you clone it in the correct place. Here are the steps:</p>

<ol>
<li>Change back into the parent directory</li>
<li>Type <code class="inline">git clone git://github.com/Polymer/tools.git</code> to pull down the script</li>
<li>Type <code class="inline">mkdir temp &amp;&amp; cd temp</code> to create a temp directory and switch into it</li>
<li>Type <code class="inline">../tools/bin/gp.sh  test-element</code> replacing  with your GitHub username</li>
<li>Change back to the parent directory and remove the temp folder (e.g.: <code class="inline">rm -rf temp</code>)</li>
</ol>

<p>The page's branch is now created:</p><figure class="post_image"><img alt="" src="https://s3.amazonaws.com/cms-assets.tutsplus.com/uploads/users/45/posts/21497/image/gh-pages.png"></figure>

<p>This now allows me to share my component via the following link:</p>

<p><a href="http://reybango.github.io/reddit-element/components/reddit-element/">http://reybango.github.io/reddit-element/components/reddit-element/</a></p>

<p>Very slick indeed!</p>

<h2>Making It Installable via Bower</h2>

<p>The final step to making your component available to the world is to register it with the Bower registry. A lot of the steps we've taken so far have been explicitly meant to help get to this point.</p>

<p>Bower uses a manifest file to know what information corresponds to the package it's installing. This is where the <code class="inline">bower.json</code> comes in. It's the manifest file Bower will use. Here's the current contents:</p>

<pre class="brush: javascript">{
  "name": "reddit-element",
  "version": "0.0.1",
  "dependencies": {
    "polymer": "Polymer/polymer#~0.2.3",
    "core-elements": "Polymer/core-elements#~0.2.3"
  }
}
</pre>

<p>This will need to be updated with additional information that the Bower registry needs to provide proper information to users looking at your component's entry. This includes:</p>

<ul>
<li>The author's name</li>
<li>A description of the component</li>
<li>Keywords that describe the component</li>
<li>The license type the component is being released under</li>
<li>The homepage (e.g.: the GitHub page we just created)</li>
</ul>

<p>With these changes in place, <code class="inline">bower.json</code> now looks like this:</p>

<pre class="brush: javascript">{
  "name": "reddit-element",
  "version": "0.0.1",
  "authors": [
        "Rey Bango"
  ],
  "description": "A demo component that pulls back a subreddits public description",
  "keywords": [
    "'Polymer",
    "web-components",
    "Reddit"
  ],
  "license": "MIT",
  "homepage": "https://github.com/reybango/reddit-element",
  "dependencies": {
    "polymer": "Polymer/polymer#~0.2.3",
    "core-elements": "Polymer/core-elements#~0.2.3"
  }
}
</pre>

<p>The keywords are important for discoverability, so give some real thought to that.</p>

<p>Finally, we're at the last step to getting listed. We'll use the <em>bower register</em> via our Terminal to register the component. It'll require the name of the component and the GitHub endpoint:</p>

<pre class="brush: bash">bower register polymer-demo git://github.com/johnsmith/polymer-demo.git
</pre>

<p>This makes the component available and searchable via the <a href="http://bower.io/search">Bower registry</a> as well as the <code class="inline">bower search</code> command:</p><figure class="post_image"><img alt="" src="https://s3.amazonaws.com/cms-assets.tutsplus.com/uploads/users/45/posts/21497/image/bower-search.png"></figure>

<p>So now I can install my new component and all of its dependencies via the following command:</p>

<pre class="brush: bash">bower install reddit-element --save
</pre>

<p>This installs it into the <code class="inline">bower_components</code> directory which is exactly where it needs to go:</p><figure class="post_image"><img alt="" src="https://s3.amazonaws.com/cms-assets.tutsplus.com/uploads/users/45/posts/21497/image/bower-install.png"></figure>

<h2>The New Boilerplate Rocks</h2>

<p>I'm very grateful to the Polymer team for creating this new boilerplate to build from. It's turned a somewhat tedious task of managing pathing issues into a non-issue. And by including the <em><a href="https://github.com/Polymer/core-component-page">core-component-page</a></em> element, creating documentation and providing a demo is now incredibly easy to do.</p>

<p>I hope this tutorial has demonstrated how easy it is to document, package, register and distribute your component. Bower is definitely what you should be leveraging to make this process easy for other users and yourself.</p>