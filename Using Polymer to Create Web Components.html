<h1>Usando Polymer Para Criar Componentes Web</h1>

<p>Construir aplicações web modernas requer várias ferramentas. Entre elas temos os pré-processadores, bibliotecas JavaScript, ferramentas de testes e muito mais coisas. E, de acordo com que a complexidade dessas aplicações aumenta, também aumenta a amplitude de ferramentas e serviços necessários para administrá-los. Não seria ótimo se algumas delas fosse mais simples?</p>

<p>Os Componentes Web buscam melhorar algumas dessas complexidades, provendo uma maneira unificada para criar novos elementos que proveem funcionalidades ricas sem a necessidade de bibliotecas extras. Os componentes são compostos de quatro especificações diferentes (<a href="http://www.polymer-project.org/platform/custom-elements.html">Custom Elements</a>, <a href="http://www.polymer-project.org/docs/polymer/template.html" target="_self">Templates</a>, <a href="http://www.polymer-project.org/platform/shadow-dom.html">Shadow DOM</a> e <a href="http://www.polymer-project.org/platform/html-imports.html">HTML imports</a>) que estão sendo concretizados pela W3C. </p>

<p>Para suprir essa demanda e dar acesso aos desenvolvedores esse tipo de funcionalidade, hoje, o Google criou a biblioteca <a href="http://www.polymer-project.org/">Polymer</a> que serve como um conjunto de códigos que implementa essas especificações, trazendo a "promessa" dos Componentes Web para você, hoje. Aprendamos mais um pouco sobre ele.</p>

<h2>O Que É Polymer</h2>

<p>Como mencionei, a biblioteca Polymer é um conjunto de códigos que implementam as quatro especificações, e que ajuda você a criar Componentes Web para todos os maiores navegadores web modernos. Ele prover a base para definir, criar e renderizar elementos customizados, de forma simples, muito parecido com as tags HTML que você já está acostumado. O que quero dizer com isso é que ele ajuda a simplificar a forma como usamos componentes complexos ao: </p>

<ul>
<li>Encapsular grande parte da complexidade do código e estrutura;</li>
<li>Permitir que os desenvolvedores usem uma convenção de nomenclatura simples como as tags;</li>
<li>Prover um conjunto de elemento de interface do usuário pré-definidos, que podem ser usados e extendidos</li>
</ul>

<p>Mas, uma coisa importante a se lembrar, é que a própria Polymer tem sido desenvolvida com base na direção que as especificações tem tomado dentro da própria W3C, provendo, assim, uma base que evoluirá junto do padrão oficial.</p>

<p>O que essa biblioteca pode fazer, é permtir que criemos componentes reutilizáveis que funcionam como verdadeiros elementos DOM e, ao mesmo tempo, diminuir nossa dependência em relação ao JavaScript para manipulações complexas da DOM, na hora de renderizar resultos de interfaces de usuário ricas.</p>

<p>Eis um exemplo rápido, lá do site do Polymer. Digamos que quero renderizar um relógio funcional em meu site. Isso, geralmente, levaria uma boa carga de código JavaScript, mas, como Polymer, posso, simplesmente, usar a seguinte sintaxe:</p>

<pre class="brush: html">&lt;polymer-ui-clock&gt;&lt;/polymer-ui-clock&gt;</pre>

<p>Parece com a sintaxe HTML que estamos acostumados a usar e bem mais fácil de implementar, ler e manter, que códigos JavaScript. E o resultado final é parecido com isso:&nbsp;</p><figure class="post_image"><img alt="" src="https://s3.amazonaws.com/cms-assets.tutsplus.com/uploads/users/45/posts/20475/image/clock.png"></figure><p>E, já que ele é mais um elemnto na DOM, podemos estilizá-lo, usando CSS, dessa forma:</p>

<pre class="brush: css">      polymer-ui-clock {
        width: 320px;
        height: 320px;
        display: inline-block;
        background: url("../assets/glass.png") no-repeat;
        background-size: cover;
        border: 4px solid rgba(32, 32, 32, 0.3);
      }
</pre>

<p>Não é o melhor dos relógios, mas não essa a questão. O ponto é você poder customizar o componente ao seu gosto e poder reutilizá-lo através de uma sintaxe mais fácil e manutenível.</p>

<h2>Instalando o Polymer</h2>

<p>Há três formas de instalar e usar o Polymer:</p>

<ul>
<li>Usando o administrador de pacotes Bower (melhor forma)</li>
<li>Usando as bibliotecas hospedadas no <a href="http://cdnjs.com/">cdnjs</a> da Cloudfare</li>
<li>Instalando através do Git</li>
</ul>

<p>Das três maneiras, a mais fácil e recomendada é usar o <a href="http://bower.io/">Bower</a> porque, além de ser mais fácil, o Bower também administra quaisquer dependências que o Polymer tiver/precisar. Isso significa que se você escolher instalar algum elemento específico de interface do usuário que depende de algum outro, o Bower lidará com isso por você.</p>

<p>O Bower é instalado como um módulo do Node (NPM), então, você precisará ter o <a href="http://nodejs.org/">Node.js</a> instalado. Na linha de comando, digite o comando a seguir:</p>

<pre class="brush: bash">npm install -g bower
</pre>

<p>Isso deve baixar o Bower, direto da Listagem do NPM, e o instalará globalmente para você. Daqui, quaisquer instalações a partir do Bower, seguirão o segunte padrão:</p>

<pre class="brush: bash">bower install 
</pre>

<p>No mínimo, você precisará instalar a plataforma e a fundação dos componentes do Polymer, já que eles provem o que é necessário para você criar e executar seus elementos customizados.</p><pre class="brush: bash">bower install --save Polymer/platform 
bower install --save Polymer/polymer</pre>

<p>Você também pode usar o seguinte comado para obter o mesmo resultado:</p>

<pre class="brush: bash">bower install --save Polymer/platform Polymer/polymer
</pre>

<p>Polymer also comes with a rich, predefined set of elements that you can begin taking advantage of immediately. They consist of <a href="http://www.polymer-project.org/docs/elements/" target="_self">UI and non-UI</a>&nbsp;based elements that provide functionality such as:</p>

<ul>
<li>Animation</li>
<li>Accordions</li>
<li>Grid layout</li>
<li>Ajax capabilities</li>
<li>Menus</li>
<li>Tabs</li>
</ul>

<p>And that's only scraping the surface. There's a lot already in there with full source code available to serve as a learning tool, as well as allow you to customize the capabilities to your needs.</p>

<p>You have a choice in how to install these components. You can install everything or only those you want to use. To install everything, you type in:</p>

<pre class="brush: bash">bower install Polymer/core-elements
bower install Polymer/polymer-ui-elements</pre>

<p>This is the kitchen sink approach and when you're starting out learning Polymer, it's probably easiest just to do that, to help you get a feel for what's available.</p>

<p>Once you're more familiar with the framework, you can cherry-pick the individual components you'd like to use and install them like this:</p>

<pre class="brush: bash">bower install Polymer/polymer-ui-accordion
</pre>

<p>This is the beauty of using Bower. Every component comes with a <code>bower.json</code> configuration file that outlines its dependencies. So if you were installing the <code>accordion</code> component, looking at the config, we can see that it has dependencies on the main <code>polymer</code> component as well as the <code>selector</code> and <code>collapsible</code> components.</p>

<pre class="brush: javascript">{
  "name": "polymer-ui-accordion",
  "private": true,
  "dependencies": {
    "polymer": "Polymer/polymer#0.2.0",
    "polymer-selector": "Polymer/polymer-selector#0.2.0",
    "polymer-ui-collapsible": "Polymer/polymer-ui-collapsible#0.2.0"
  },
  "version": "0.2.0"
}
</pre>

<p>The key thing is that you don't have to worry about that because Bower manages that for you. This is why it's the preferred tool for installing Polymer.</p>

<p>Installing via Bower will create a folder called <code>bower_components</code> in your project folder housing all of the stuff Polymer needs.</p>

<h2>Making a New Polymer Element</h2>

<p>The Polymer site pretty much nails the description of custom elements:</p>

<p>“Custom Elements are the core building blocks of Polymer-based applications. You create applications by assembling custom elements together, either ones provided by Polymer, ones you create yourself, or third-party elements.”</p>

<p>Polymer gives us the ability to create our own custom elements from scratch and even reuse other elements to extend our custom ones. This is done by first creating a template of the custom element. For all intents, this template is a combination of HTML, CSS and JavaScript and includes the functionality that will be available when you use the element. It's based off the <a href="http://www.whatwg.org/specs/web-apps/current-work/multipage/scripting-1.html#the-template-element">WhatWG HTML Templates specification</a> which is meant to provide native support for client-side templating.</p>

<p>Let's look at this simple example of a Polymer template:</p>

<pre class="brush: html">&lt;link rel="import" href="../bower_components/polymer/polymer.html"&gt;

&lt;polymer-element name="lorem-element"&gt;
  &lt;template&gt;
    &lt;p&gt;Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.&lt;/p&gt;
  &lt;/template&gt;
&lt;/polymer-element&gt;</pre>

<p>This Element allows you to easily add Lorem Ipsum text into your code by simply using the following tag:</p>

<pre class="brush: html">&lt;lorem-element&gt;&lt;/lorem-element&gt;</pre>

<p>The first thing that needs to be included is Polymer core, which is the main API that allows you to define the Custom Elements:</p>

<pre class="brush: html">&lt;link rel="import" href="../bower_components/polymer/polymer.html"&gt;</pre>

<p>The next step is defining the name of the new element using Polymer's <code>polymer-element</code> directive: </p>

<pre class="brush: html">&lt;polymer-element name="lorem-element"&gt;</pre>

<p>In this case, I've named my new element <code>lorem-element</code>. The name is a required attribute and it must contain a dash (“-”). </p>

<p>From there we use the <code>template</code> directive to wrap the main body tags and code that will make up our new element. For this simple example, I grab Lorem Ipsum text and wrapped it with paragraph tags.</p>

<p>That's it! My custom element is done and I can now use it. </p>

<h2>Using Your New Polymer Element</h2>

<p>Keep in mind that this component will be imported into other pages in your web app that may want to leverage it. This is possible because of Polymer's implementation of the HTML Imports specification that allows you to include and reuse HTML documents in other HTML documents.</p>

<p>First, you need to include <code>platform.js</code> which provides the polyfill that mimicks the native APIs:</p>

<pre class="brush: html">&lt;script src="bower_components/platform/platform.js"&gt;&lt;/script&gt;</pre>

<p>Next, we need to import our custom element into our web page:</p>

<pre class="brush: html">&lt;link rel="import" href="lorem-element.html"&gt;</pre>

<p>Once you've done this, your new custom element is now available allowing you to do something like this:</p>

<pre class="brush: html">&lt;div&gt;&lt;lorem-element&gt;&lt;/lorem-element&gt;&lt;/div&gt;</pre>

<p>You also have the ability to fully style the element as well: </p>

<pre class="brush: html">&lt;style&gt;
      div { width: 300px;}
      lorem-element { font: bold 16px cursive;}
&lt;/style&gt;</pre>

<p>This is a pretty basic example. Let's take it a step further.</p>

<h2>Adding More Functionality to Your Element</h2>

<p>If you remember, I mentioned how you can leverage existing elements to enhance your custom one. Let's look at an example of this.</p>

<p>Suppose I wanted to have an element that went out to Reddit and grabbed data from one of the subreddits. I could take advantage of Polymer's existing Ajax component by including that in my custom element like this:</p>

<pre class="brush: html">&lt;link rel="import" href="../bower_components/polymer/polymer.html"&gt;
&lt;link rel="import" href="../bower_components/core-ajax/core-ajax.html"&gt;

&lt;polymer-element name="reddit-element"&gt;
  &lt;template&gt;
    &lt;core-ajax url="http://www.reddit.com//r/aww/about.json" auto response="{{resp}}"&gt;&lt;/core-ajax&gt;
    &lt;p&gt;{{resp.data.public_description}}&lt;/p&gt;
  &lt;/template&gt;
&lt;/polymer-element&gt; </pre>

<p>Notice that I'm importing the Polymer Ajax component and then dropping it into my template. This now makes it easy to reference my new element&nbsp;which makes the XHR call to pull back the JSON data and fill it into my paragraph tags with the subreddit's public description:</p>

<p>“Things that make you go AWW! Like puppies. And bunnies... and so on... A place for really cute pictures, videos and stories!”</p>

<p>The response is returned and Polymer establishes a two-way data binding that allows me to be able to use the data by wrapping it in double curly braces like this <code>{{resp.data.public_description}}</code>.</p>

<p>This is cool but in most cases, we're not going to hardcode a URL for a specific resource. Let's expand this further by adding attributes to our custom element. Doing this is incredibly simple. First, you need to update the <code>polymer-element</code> directive to reflect the attributes you want for your custom element:</p>

<pre class="brush: html">&lt;polymer-element name="reddit-element" attributes="subreddit"&gt;</pre>

<p>In this case, I want to be able to pass a subreddit to my element and have it pull back data based on that. I can now change the call to <code>polymer-ajax</code> like this:</p>

<pre class="brush: html">&lt;core-ajax url="http://www.reddit.com//r/{{subreddit}}/about.json" auto response="{{resp}}"&gt;&lt;/core-ajax&gt;</pre>

<p>Notice how I'm using Polymer's data binding capabilities to dynamically build the URL based on the attribute value of <code>{{subreddit}}</code>. Now, I can update how I reference my custom element to pass in the subreddit that I want:</p>

<pre class="brush: html">&lt;reddit-element subreddit="aww"&gt;&lt;/reddit-element&gt;</pre>

<p>The last thing I want to do is ensure there's a default value for my attribute so my code doesn't blow up. I do this by adding the following into my element template:</p>

<pre class="brush: html">  &lt;script&gt;
    Polymer('reddit-element', {
      subreddit: "aww"
    });
  &lt;/script&gt;</pre>

<p>This ensures that I'll always have a default value for my element's public attribute. Here's how the final code looks like:</p>

<pre class="brush: html">&lt;link rel="import" href="../bower_components/polymer/polymer.html"&gt;
&lt;link rel="import" href="../bower_components/core-ajax/core-ajax.html"&gt;

&lt;polymer-element name="reddit-element" attributes="subreddit"&gt;
  &lt;template&gt;
    &lt;core-ajax url="http://www.reddit.com//r/{{subreddit}}/about.json" auto response="{{resp}}"&gt;&lt;/core-ajax&gt;
    &lt;p&gt;{{resp.data.public_description}}&lt;/p&gt;
  &lt;/template&gt;
  &lt;script&gt;
    Polymer('reddit-element', {
      // These default values are overridden
      // by the user's attribute values.
      subreddit: "aww"
    });
  &lt;/script&gt;
&lt;/polymer-element&gt; </pre>

<p>And there's quite a bit more stuff you can do including adding custom callback handlers, managing events, setting up Mutation Observers to process changes to the DOM and much more.</p>

<h2>The Future Is Here</h2>

<p>Web Components are going to change the way we build web apps and Polymer is bringing this to us today. You&nbsp;now have the ability to create your own customized and maintainable components that can be catered to the specific needs of your application. These components can be easily shared allowing other teams or the community to easily share and benefit from these encapsulated building blocks.</p>